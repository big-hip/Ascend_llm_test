# export dist_config='{
#   "prefill":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 1,
#     "P": 1,
#     "T": 4,
#     "S": 1,
#     "E": 2
#   },
#   "parallel_config": 
#   {
#     "DP_config": [1.0],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"dp_tp_ep",
#   "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-1":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-2":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-3":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#   "combine_after":false}],

#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 4,
#           "ratio": [0.25,0.25,0.25,0.25]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25]},
#           "shared_expert":{
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25],
#             "hidden":7168}}}}
#   }
#   },
#   "decode":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 1,
#     "P": 1,
#     "T": 4,
#     "S": 1,
#     "E": 2
#   },
#   "parallel_config": 
#   {
#     "DP_config": [1.0],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"dp_tp_ep",
#     "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-1":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-2":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-3":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#     "combine_after":false}],
#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 4,
#           "ratio": [0.25,0.25,0.25,0.25]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25]},
#           "shared_expert":{
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25],
#             "hidden":7168}}}}
#   }
#   }
# }'
# #用户应将shared export 中的Hidden值设置为128*share export/2
    
# # 打印环境变量以验证
# echo "dist_config 已设置为："
# echo $dist_config

export dist_config='{
  "prefill":{
  "device_nums": 8,
  "parallel_degree": 
  {
    "D": 8,
    "P": 1,
    "T": 1,
    "S": 1,
    "E": 1
  },
  "parallel_config": 
  {
    "DP_config": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125],
    "PP_config": [1.0],
    "Zero_config": {"stage":0,"ratio":[1.0]},
    
    "SP_config": 
    {
      "partition": [1.0]
    },

    "EP_config":[{"ep_mode":"none_ep",
  "expert_map":{"decoder0":{"0-0-0":[0,1,2,3],"0-0-1":[0,1,2,3],"1-0-0":[4,5,6,7],"1-0-1":[4,5,6,7]},"decoder1":{"0-0-0":[0,1,2,3],"0-0-1":[0,1,2,3],"1-0-0":[4,5,6,7],"1-0-1":[4,5,6,7]}},
  "combine_after":false}],

    "TP_config": 
    {
      "embedding":{
          "parallel_degree": 2,
          "ratio": [0.5,0.5]},
      "decoder":{
        "all":{
          "attn":{
            "num_head":128,
            "hidden":7168,
            "parallel_degree": 2,
            "ratio": [0.5,0.5]},
          "shared_expert":{
            "parallel_degree": 2,
            "ratio": [0.5,0.5],
            "hidden":7168}}}}
  }
  },
  "decode":{
  "device_nums": 8,
  "parallel_degree": 
  {
    "D": 8,
    "P": 1,
    "T": 1,
    "S": 1,
    "E": 1
  },
  "parallel_config": 
  {
    "DP_config": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125],
    "PP_config": [1.0],
    "Zero_config": {"stage":0,"ratio":[1.0]},
    
    "SP_config": 
    {
      "partition": [1.0]
    },

    "EP_config":[{"ep_mode":"none_ep",
    "expert_map":{"decoder0":{"0-0-0":[0,1,2,3],"0-0-1":[0,1,2,3],"1-0-0":[4,5,6,7],"1-0-1":[4,5,6,7]},"decoder1":{"0-0-0":[0,1,2,3],"0-0-1":[0,1,2,3],"1-0-0":[4,5,6,7],"1-0-1":[4,5,6,7]}},
    "combine_after":false}],
    "TP_config": 
    {
      "embedding":{
          "parallel_degree": 2,
          "ratio": [0.5,0.5]},
      "decoder":{
        "all":{
          "attn":{
            "num_head":128,
            "hidden":7168,
            "parallel_degree": 2,
            "ratio": [0.5,0.5]},
          "shared_expert":{
            "parallel_degree": 2,
            "ratio": [0.5,0.5],
            "hidden":7168}}}}
  }
  }
}'
#用户应将shared export 中的Hidden值设置为128*share export/2
    
# 打印环境变量以验证
echo "dist_config 已设置为："
echo $dist_config


# export dist_config='{
#   "prefill":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 2,
#     "P": 1,
#     "T": 1,
#     "S": 1,
#     "E": 4
#   },
#   "parallel_config": 
#   {
#     "DP_config": [0.5,0.5],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"dp_tp_ep",
#   "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],"1-0-0":[32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#   "combine_after":false}],

#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 4,
#           "ratio": [0.25,0.25,0.25,0.25]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25]},
#           "shared_expert":{
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25],
#             "hidden":7168}}}}
#   }
#   },
#   "decode":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 2,
#     "P": 1,
#     "T": 1,
#     "S": 1,
#     "E": 4
#   },
#   "parallel_config": 
#   {
#     "DP_config": [0.5,0.5],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"dp_tp_ep",
#     "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],"1-0-0":[32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#     "combine_after":false}],
#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 4,
#           "ratio": [0.25,0.25,0.25,0.25]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25]},
#           "shared_expert":{
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25],
#             "hidden":7168}}}}
#   }
#   }
# }'
# #用户应将shared export 中的Hidden值设置为128*share export/2
    
# # 打印环境变量以验证
# echo "dist_config 已设置为："
# echo $dist_config



# export dist_config='{
#   "prefill":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 1,
#     "P": 1,
#     "T": 1,
#     "S": 1,
#     "E": 8
#   },
#   "parallel_config": 
#   {
#     "DP_config": [1.0],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"dp_tp_ep",
#   "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#   "combine_after":false}],

#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 8,
#           "ratio": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 8,
#             "ratio": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125]},
#           "shared_expert":{
#             "parallel_degree": 8,
#             "ratio": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125],
#             "hidden":7168}}}}
#   }
#   },
#   "decode":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 1,
#     "P": 1,
#     "T": 1,
#     "S": 1,
#     "E": 8
#   },
#   "parallel_config": 
#   {
#     "DP_config": [1.0],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"dp_tp_ep",
#     "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#     "combine_after":false}],
#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 8,
#           "ratio": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 8,
#             "ratio": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125]},
#           "shared_expert":{
#             "parallel_degree": 8,
#             "ratio": [0.125,0.125,0.125,0.125,0.125,0.125,0.125,0.125],
#             "hidden":7168}}}}
#   }
#   }
# }'
# #用户应将shared export 中的Hidden值设置为128*share export/2
    
# # 打印环境变量以验证
# echo "dist_config 已设置为："
# echo $dist_config


# export dist_config='{
#   "prefill":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 2,
#     "P": 1,
#     "T": 4,
#     "S": 1,
#     "E": 1
#   },
#   "parallel_config": 
#   {
#     "DP_config": [0.5,0.5],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"none_ep",
#   "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-1":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-2":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-3":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#   "combine_after":false}],

#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 4,
#           "ratio": [0.25,0.25,0.25,0.25]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25]},
#           "shared_expert":{
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25],
#             "hidden":7168}}}}
#   }
#   },
#   "decode":{
#   "device_nums": 8,
#   "parallel_degree": 
#   {
#     "D": 2,
#     "P": 1,
#     "T": 4,
#     "S": 1,
#     "E": 1
#   },
#   "parallel_config": 
#   {
#     "DP_config": [0.5,0.5],
#     "PP_config": [1.0],
#     "Zero_config": {"stage":0,"ratio":[1.0]},
    
#     "SP_config": 
#     {
#       "partition": [1.0]
#     },

#     "EP_config":[{"ep_mode":"none_ep",
#     "expert_map":{"decoder3":{"0-0-0":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-1":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-2":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"0-0-3":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]}},
#     "combine_after":false}],
#     "TP_config": 
#     {
#       "embedding":{
#           "parallel_degree": 4,
#           "ratio": [0.25,0.25,0.25,0.25]},
#       "decoder":{
#         "all":{
#           "attn":{
#             "num_head":128,
#             "hidden":7168,
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25]},
#           "shared_expert":{
#             "parallel_degree": 4,
#             "ratio": [0.25,0.25,0.25,0.25],
#             "hidden":7168}}}}
#   }
#   }
# }'
# #用户应将shared export 中的Hidden值设置为128*share export/2
    
# # 打印环境变量以验证
# echo "dist_config 已设置为："
# echo $dist_config